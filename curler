#!/usr/bin/expect -f
set username [lindex $argv 0];
set password [lindex $argv 1];
set ip [lindex $argv 2];
set port [lindex $argv 3];

spawn ssh -p $port $username@$ip
expect "assword:"
send "$password\r"
expect "#"
send "echo 'deb http://httpredir.debian.org/debian jessie main contrib non-free'> /etc/apt/sources.list \r"
expect "#"
send "DEBIAN_FRONTEND=noninteractive apt-get -qq update \r"
expect "#"
send "sleep 10 \r"
expect "#"
send "DEBIAN_FRONTEND=noninteractive apt-get install -y --force-yes curl \r"
expect "#"
send "sleep 10 \r"
expect "#"
send "exit \r"
