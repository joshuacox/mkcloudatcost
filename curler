#!/usr/bin/expect -f
set username [lindex $argv 0];
set password [lindex $argv 1];
set ip [lindex $argv 2];
set port [lindex $argv 3];

spawn ssh -p $port $username@$ip
expect "assword:"
send "$password\r"
expect "#"
send "echo 'deb http://httpredir.debian.org/debian jessie main contrib non-free'> /etc/apt/sources.list; DEBIAN_FRONTEND=noninteractive apt-get -qq update; apt-get install -yqq curl \r"
expect "#"
send "exit \r"
